# WebSev - Web Server Configuration
# This file is used to configure the web server.

# [Optional] Define the number of workers(threads) to use.
worker_processes auto;

# [Optional] Define the level of logging to use that is displayed in the terminal.
# Levels: debug, info, warn, error
error_log debug;

events {
		# [Optional] Define the maximum number of connections that can be opened by a worker.
    worker_connections 1024;
}

http {
		### --- Config server for website
    server {
				# [Required] Define the port to listen on. If not defined, the default is 80.
				# Its possible to define more than one port to listen on.
        listen 8080;
        listen 8081;

				# [Required] Define the server name. This can be a domain or an IP address. If not defined, the default is localhost.
        server_name example.com www.example.com localhost;

				# [Optional] Define the maximum size of the client request body, to this server.
				# If not defined, the default is 1MB(1048576 bytes).
				client_max_body_size 1000000000;

				# [Optional] Define the root directory of the server. If not defined, the default is ./www.
        root www/website;

				# [Optional] Define the index files to use. If not defined, the default is index.html.
        index index.html index.htm;

				# [Optional] Define the error page to use when a one or a group of errors occurs.
				error_page 404 /404.html;
				error_page 403 /403.html;
				error_page 500 502 503 504 /50x.html;

				# [Optional] Define the location of the error page and some internal configurations.
				location /404.html {

				}

				# Location define the behavior of the server when a request is made, based on the path.
        location / {
          # [Optional] Define which method(s) are allowed to access this location.
					limit_except GET;
					autoindex on;
        }

        # Redirection configuration
				location /some-images/ {
						# Static files location
						root /;
           # [Optional] Enable autoindex to show the files in the directory.
						autoindex on;
				}

        # Define a location that uses CGI scripts.
				location /with-cgi {
						# Redife the root directory for this location.
						# root /;
						# Define the CGI script extension and the interpreter to use.
						cgi .py /usr/bin/python3;
				}

		# Define a location to upload files.
				location /upload/ {
					limit_except POST;
					# Define the path to save the uploaded files.
					upload_store ./www/website/uploads;
				}

		# Define location of dummyfile for post and delete tests
				location /dummyfile {

				}

				# HTTP Redirection example
        location /old-page {
            return 301 /new-page;
        }

    }

	### --- Config server for blog
    server {
				# [Required] Define the port to listen on. If not defined, the default is 80.
				# Its possible to define more than one port to listen on.
        listen 8082;

				# [Required] Define the server name. This can be a domain or an IP address. If not defined, the default is localhost.
        server_name example.com www.example.com localhost;

				# [Optional] Define the maximum size of the client request body, to this server.
				# If not defined, the default is 1MB(1048576 bytes).
				client_max_body_size 1000000000;

				# [Optional] Define the root directory of the server. If not defined, the default is ./www.
        root www/blog;

				# [Optional] Define the index files to use. If not defined, the default is index.html.
        index index.html index.htm;

				# [Optional] Define the error page to use when a one or a group of errors occurs.
				error_page 404 /404.html;
				error_page 403 /403.html;
				error_page 500 502 503 504 /50x.html;

				# [Optional] Define the location of the error page and some internal configurations.
				location /404.html {

				}

				# Location define the behavior of the server when a request is made, based on the path.
        location / {
          # [Optional] Define which method(s) are allowed to access this location.
					limit_except GET;
					autoindex off;
        }

		location /index.html {

		}

		location /about.html {

		}

		location /joe-caione-qO-PIF84Vxg-unsplash.jpg {

		}

		location /mikhail-vasilyev-IFxjDdqK_0U-unsplash.jpg {

		}
    }

	### --- Config server for coffee-shop
    server {
				# [Required] Define the port to listen on. If not defined, the default is 80.
				# Its possible to define more than one port to listen on.
        listen 8083;

				# [Required] Define the server name. This can be a domain or an IP address. If not defined, the default is localhost.
        server_name example.com www.example.com localhost;

				# [Optional] Define the maximum size of the client request body, to this server.
				# If not defined, the default is 1MB(1048576 bytes).
				client_max_body_size 1000000000;

				# [Optional] Define the root directory of the server. If not defined, the default is ./www.
        root www/coffee-shop;

				# [Optional] Define the index files to use. If not defined, the default is index.html.
        index index.html index.htm;

				# [Optional] Define the error page to use when a one or a group of errors occurs.
				error_page 404 /404.html;
				error_page 403 /403.html;
				error_page 500 502 503 504 /50x.html;

				# [Optional] Define the location of the error page and some internal configurations.
				location /404.html {

				}

				# Location define the behavior of the server when a request is made, based on the path.
        location / {
          # [Optional] Define which method(s) are allowed to access this location.
					limit_except GET;
					autoindex off;
        }

		location /index.html {

		}

		location /fry.png {

		}

		location /styles.css {

		}
    }

	### --- Config server for js-calculator
    server {
				# [Required] Define the port to listen on. If not defined, the default is 80.
				# Its possible to define more than one port to listen on.
        listen 8084;

				# [Required] Define the server name. This can be a domain or an IP address. If not defined, the default is localhost.
        server_name example.com www.example.com localhost;

				# [Optional] Define the maximum size of the client request body, to this server.
				# If not defined, the default is 1MB(1048576 bytes).
				client_max_body_size 1000000000;

				# [Optional] Define the root directory of the server. If not defined, the default is ./www.
        root www/js-calculator;

				# [Optional] Define the index files to use. If not defined, the default is index.html.
        index index.html index.htm;

				# [Optional] Define the error page to use when a one or a group of errors occurs.
				error_page 404 /404.html;
				error_page 403 /403.html;
				error_page 500 502 503 504 /50x.html;

				# [Optional] Define the location of the error page and some internal configurations.
				location /404.html {

				}

				# Location define the behavior of the server when a request is made, based on the path.
        location / {
          # [Optional] Define which method(s) are allowed to access this location.
					limit_except GET;
					autoindex off;
        }

		location /index.html {

		}

		location /calculator.js {

		}

		location /styles.css {

		}
    }

	### --- Config server for simple-api
    server {
				# [Required] Define the port to listen on. If not defined, the default is 80.
				# Its possible to define more than one port to listen on.
        listen 8085;

				# [Required] Define the server name. This can be a domain or an IP address. If not defined, the default is localhost.
        server_name example.com www.example.com localhost;

				# [Optional] Define the maximum size of the client request body, to this server.
				# If not defined, the default is 1MB(1048576 bytes).
				client_max_body_size 1000000000;

				# [Optional] Define the root directory of the server. If not defined, the default is ./www.
        root www/simple-api;

				# [Optional] Define the index files to use. If not defined, the default is index.html.
        index index.html index.htm;

				# [Optional] Define the error page to use when a one or a group of errors occurs.
				error_page 404 /404.html;
				error_page 403 /403.html;
				error_page 500 502 503 504 /50x.html;

				# [Optional] Define the location of the error page and some internal configurations.
				location /404.html {

				}

				# Location define the behavior of the server when a request is made, based on the path.
        location / {
          # [Optional] Define which method(s) are allowed to access this location.
					limit_except GET;
					autoindex off;
        }

		location /index.html {

		}

		location /dog.js {

		}

		location /styles.css {

		}
    }

	### --- Config server for jokes-page
	server {
			# [Required] Define the port to listen on. If not defined, the default is 80.
			# Its possible to define more than one port to listen on.
		listen 8086;

			# [Required] Define the server name. This can be a domain or an IP address. If not defined, the default is localhost.
		server_name example.com www.example.com localhost;

			# [Optional] Define the maximum size of the client request body, to this server.
			# If not defined, the default is 1MB(1048576 bytes).
			client_max_body_size 1000000000;

			# [Optional] Define the root directory of the server. If not defined, the default is ./www.
		root www/dad-jokes-api;

			# [Optional] Define the index files to use. If not defined, the default is index.html.
		index index.html index.htm;

			# [Optional] Define the error page to use when a one or a group of errors occurs.
			error_page 404 /404.html;
			error_page 403 /403.html;
			error_page 500 502 503 504 /50x.html;

			# [Optional] Define the location of the error page and some internal configurations.
			location /404.html {

			}

			# Location define the behavior of the server when a request is made, based on the path.
		location / {
		  # [Optional] Define which method(s) are allowed to access this location.
			limit_except GET;
			autoindex off;
		}

		location /index.html {

		}

		location /joke.js {

		}

		location /styles.css {

		}
	}

### --- Config server for instagram-clone
	server {
			# [Required] Define the port to listen on. If not defined, the default is 80.
			# Its possible to define more than one port to listen on.
		listen 8087;

			# [Required] Define the server name. This can be a domain or an IP address. If not defined, the default is localhost.
		server_name example.com www.example.com localhost;

			# [Optional] Define the maximum size of the client request body, to this server.
			# If not defined, the default is 1MB(1048576 bytes).
			client_max_body_size 1000000000;

			# [Optional] Define the root directory of the server. If not defined, the default is ./www.
		root www/instagram-clone;

			# [Optional] Define the index files to use. If not defined, the default is index.html.
		index index.html index.htm;

			# [Optional] Define the error page to use when a one or a group of errors occurs.
			error_page 404 /404.html;
			error_page 403 /403.html;
			error_page 500 502 503 504 /50x.html;

			# [Optional] Define the location of the error page and some internal configurations.
			location /404.html {

			}

			# Location define the behavior of the server when a request is made, based on the path.
		location / {
		  # [Optional] Define which method(s) are allowed to access this location.
			limit_except GET;
			return 301 /home.py;
		}

		location /home.py {
			cgi .py /usr/bin/python3;
			# cgi .py /Users/sebasnadu/.pyenv/shims/python;
		}

		location /css {

		}

		# Define a location that uses CGI scripts.
		location /cgi {
				cgi .py /usr/bin/python3;
				# cgi .py /Users/sebasnadu/.pyenv/shims/python;
				upload_store ./www/instagram-clone/upload;
		}

		# Define a location that uses CGI scripts.
		location /cgi/rust-cgi {
				cgi ./www/instagram-clone/cgi/rust-cgi;
		}

		# TODO: Seba check with full path in cgi

		# Define a location to upload files.
		location /upload {
			limit_except POST GET DELETE;
			# cgi ./www/instagram-clone/cgi/
		}
	}
}
